{
    "sourceFile": "src/App.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 64,
            "patches": [
                {
                    "date": 1715350240271,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1715350249899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import { USER_ID, deleteTodo, getTodos, postTodo } from './api/todos';\n import { TodoList } from './Components/TodoList';\n import { ErrorNotification } from './Components/ErrorNotification';\n import { Footer } from './Components/Footer';\n-import { Status, Todo, Error } from './types/Todo';\n+import { Status, Todo, Error } from ;\n \n export const App: React.FC = () => {\n   const [todos, setTodos] = useState<Todo[]>([]);\n   const [error, setError] = useState<boolean>(false);\n@@ -253,5 +253,4 @@\n       />\n     </div>\n   );\n };\n-\n"
                },
                {
                    "date": 1715350255319,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import { USER_ID, deleteTodo, getTodos, postTodo } from './api/todos';\n import { TodoList } from './Components/TodoList';\n import { ErrorNotification } from './Components/ErrorNotification';\n import { Footer } from './Components/Footer';\n-import { Status, Todo, Error } from ;\n+import { Status, Todo, Error } from './';\n \n export const App: React.FC = () => {\n   const [todos, setTodos] = useState<Todo[]>([]);\n   const [error, setError] = useState<boolean>(false);\n"
                },
                {
                    "date": 1715351233995,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n import { USER_ID, deleteTodo, getTodos, postTodo } from './api/todos';\n import { TodoList } from './Components/TodoList';\n import { ErrorNotification } from './Components/ErrorNotification';\n import { Footer } from './Components/Footer';\n-import { Status, Todo, Error } from './';\n+import { Status, Todo, Error } from './Types/Todo';\n \n export const App: React.FC = () => {\n   const [todos, setTodos] = useState<Todo[]>([]);\n   const [error, setError] = useState<boolean>(false);\n@@ -155,8 +155,9 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n     try {\n+      aw\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n"
                },
                {
                    "date": 1715351243095,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,9 +155,9 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n     try {\n-      aw\n+      await postTodo\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n"
                },
                {
                    "date": 1715351295972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,9 +155,8 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n     try {\n-      await postTodo\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n"
                },
                {
                    "date": 1715351666869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n \n         setTodos(todosData);\n       } catch (err) {\n         setError(true);\n-        setErrorType('load');\n+        setErrorType('up');\n       }\n     };\n \n     fetchTodos();\n"
                },
                {
                    "date": 1715351967782,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n \n         setTodos(todosData);\n       } catch (err) {\n         setError(true);\n-        setErrorType('up');\n+        setErrorType('update');\n       }\n     };\n \n     fetchTodos();\n@@ -170,8 +170,9 @@\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n+    n\n \n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n"
                },
                {
                    "date": 1715351973402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n-    n\n+    const newStt\n \n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n"
                },
                {
                    "date": 1715351980115,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,10 +170,11 @@\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n-    const newStt\n+    const newSttus = \n \n+\n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n         completed: !allCompleted,\n"
                },
                {
                    "date": 1715351985308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n-    const newSttus = \n+    const newSttus = !all\n \n \n     setTodos(prev =>\n       prev.map(todo => ({\n"
                },
                {
                    "date": 1715351996436,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,11 +170,10 @@\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n-    const newSttus = !all\n+    const newStatus = !allCompleted;\n \n-\n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n         completed: !allCompleted,\n"
                },
                {
                    "date": 1715352010283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -175,9 +175,9 @@\n \n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n-        completed: !allCompleted,\n+        completed: new,\n       })),\n     );\n   };\n \n"
                },
                {
                    "date": 1715352017975,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -175,9 +175,9 @@\n \n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n-        completed: new,\n+        completed: !allCompleted,\n       })),\n     );\n   };\n \n"
                },
                {
                    "date": 1715352412850,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,9 @@\n \n         setTodos(todosData);\n       } catch (err) {\n         setError(true);\n-        setErrorType('update');\n+        setErrorType('load');\n       }\n     };\n \n     fetchTodos();\n@@ -170,9 +170,8 @@\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n-    const newStatus = !allCompleted;\n \n     setTodos(prev =>\n       prev.map(todo => ({\n         ...todo,\n"
                },
                {
                    "date": 1715352639367,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -153,9 +153,9 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n-    setLoadingTodoId(id);\n+    // setLoadingTodoId(id);\n     try {\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n"
                },
                {
                    "date": 1715352655746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -154,9 +154,9 @@\n   };\n \n   const handleToggleTodo = async (id: number) => {\n     // setLoadingTodoId(id);\n-    try {\n+    // try {\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n"
                },
                {
                    "date": 1715352662224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,9 +162,10 @@\n         ),\n       );\n       await deleteTodo(id);\n       setLoadingTodoId(null);\n-    } catch (err) {\n+  // }\n+    catch (err) {\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715352672794,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,8 +160,9 @@\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n       );\n+    try {}\n       await deleteTodo(id);\n       setLoadingTodoId(null);\n   // }\n     catch (err) {\n"
                },
                {
                    "date": 1715352680125,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,11 +160,12 @@\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n       );\n-    try {}\n-      await deleteTodo(id);\n-      setLoadingTodoId(null);\n+    try {\n+\n+    }\n+     \n   // }\n     catch (err) {\n       setError(true);\n       setErrorType('delete');\n"
                },
                {
                    "date": 1715352695218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,19 +155,19 @@\n \n   const handleToggleTodo = async (id: number) => {\n     // setLoadingTodoId(id);\n     // try {\n-      setTodos(prev =>\n-        prev.map(todo =>\n-          todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n-        ),\n-      );\n+    setTodos(prev =>\n+      prev.map(todo =>\n+        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n+      ),\n+    );\n     try {\n-\n-    }\n-     \n-  // }\n-    catch (err) {\n+      await\n+        deleteTodo(id);\n+      setLoadingTodoId(null);\n+    } catch (err) {\n+      // }\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715352702118,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,10 +161,10 @@\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n     );\n     try {\n-      await\n-        deleteTodo(id);\n+      \n+        // deleteTodo(id);\n       setLoadingTodoId(null);\n     } catch (err) {\n       // }\n       setError(true);\n"
                },
                {
                    "date": 1715352716723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,11 +161,10 @@\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n     );\n     try {\n-      \n-        // deleteTodo(id);\n-      setLoadingTodoId(null);\n+      // deleteTodo(id);\n+      await update(null);\n     } catch (err) {\n       // }\n       setError(true);\n       setErrorType('delete');\n"
                },
                {
                    "date": 1715352900557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,9 +162,9 @@\n       ),\n     );\n     try {\n       // deleteTodo(id);\n-      await update(null);\n+      await updateT(null);\n     } catch (err) {\n       // }\n       setError(true);\n       setErrorType('delete');\n"
                },
                {
                    "date": 1715352915978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,15 @@\n /* eslint-disable jsx-a11y/label-has-associated-control */\n /* eslint-disable jsx-a11y/control-has-associated-label */\n import React, { useEffect, useRef, useState } from 'react';\n import { UserWarning } from './UserWarning';\n-import { USER_ID, deleteTodo, getTodos, postTodo } from './api/todos';\n+import {\n+  USER_ID,\n+  deleteTodo,\n+  getTodos,\n+  postTodo,\n+  updateTodo,\n+} from './api/todos';\n import { TodoList } from './Components/TodoList';\n import { ErrorNotification } from './Components/ErrorNotification';\n import { Footer } from './Components/Footer';\n import { Status, Todo, Error } from './Types/Todo';\n@@ -162,9 +168,9 @@\n       ),\n     );\n     try {\n       // deleteTodo(id);\n-      await updateT(null);\n+      await updateTodo(null);\n     } catch (err) {\n       // }\n       setError(true);\n       setErrorType('delete');\n"
                },
                {
                    "date": 1715352939018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,9 +168,9 @@\n       ),\n     );\n     try {\n       // deleteTodo(id);\n-      await updateTodo(null);\n+      await updateTodo(id);\n     } catch (err) {\n       // }\n       setError(true);\n       setErrorType('delete');\n"
                },
                {
                    "date": 1715353011517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-      // }\n+     \n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353016826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     \n+     setTodos\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353023858,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos\n+     setTodos(prev => prev)\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353029178,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev)\n+     setTodos(prev => prev.map((todo)))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353035658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo)))\n+     setTodos(prev => prev.map((todo) => todo.id == ))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353041090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == ))\n+     setTodos(prev => prev.map((todo) => todo.id == id ? {}))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353047295,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == id ? {}))\n+     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, compl}))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353053611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, compl}))\n+     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo}))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353060861,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo}))\n+     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo.completed}))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353066660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo.completed}))\n+     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo.completed } : to))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353074363,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,9 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo.completed } : to))\n+     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo.completed } : todo))\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353080269,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,9 +170,13 @@\n     try {\n       // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n-     setTodos(prev => prev.map((todo) => todo.id == id ? {...todo, completed: !todo.completed } : todo))\n+      setTodos(prev =>\n+        prev.map(todo =>\n+          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n+        ),\n+      );\n       setError(true);\n       setErrorType('delete');\n     }\n   };\n"
                },
                {
                    "date": 1715353088724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,268 @@\n+/* eslint-disable jsx-a11y/label-has-associated-control */\n+/* eslint-disable jsx-a11y/control-has-associated-label */\n+import React, { useEffect, useRef, useState } from 'react';\n+import { UserWarning } from './UserWarning';\n+import {\n+  USER_ID,\n+  deleteTodo,\n+  getTodos,\n+  postTodo,\n+  updateTodo,\n+} from './api/todos';\n+import { TodoList } from './Components/TodoList';\n+import { ErrorNotification } from './Components/ErrorNotification';\n+import { Footer } from './Components/Footer';\n+import { Status, Todo, Error } from './Types/Todo';\n+\n+export const App: React.FC = () => {\n+  const [todos, setTodos] = useState<Todo[]>([]);\n+  const [error, setError] = useState<boolean>(false);\n+  const [errorType, setErrorType] = useState<Error | null>(null);\n+  const [filter, setFilter] = useState<Status>('all');\n+  const [newTodoTitle, setNewTodoTitle] = useState('');\n+  const [focus, setFocus] = useState<boolean>(true);\n+  const [tempTodo, setTempTodo] = useState<Todo | null>(null);\n+  const [loading, setLoading] = useState<boolean>(false);\n+  const [loadingTodoId, setLoadingTodoId] = useState<number | null>(null);\n+  const [addNewTodo, setAddNewTodo] = useState<boolean>(false);\n+  const [loadingAddTodoId, setLoadingAddTodoId] = useState<number | null>(null);\n+  const inputRef = useRef<HTMLInputElement>(null);\n+  const [deleteFewTodo, setDeleteFewTodo] = useState<number[]>([]);\n+\n+  useEffect(() => {\n+    const fetchTodos = async () => {\n+      try {\n+        const todosData = await getTodos();\n+\n+        setTodos(todosData);\n+      } catch (err) {\n+        setError(true);\n+        setErrorType('load');\n+      }\n+    };\n+\n+    fetchTodos();\n+  }, []);\n+\n+  useEffect(() => {\n+    if (focus) {\n+      const inputField = document.querySelector(\n+        '.todoapp__new-todo',\n+      ) as HTMLElement;\n+\n+      if (inputField) {\n+        inputField.focus();\n+      }\n+    }\n+  }, [focus]);\n+\n+  if (!USER_ID) {\n+    return <UserWarning />;\n+  }\n+\n+  const handleKeyDown = async (\n+    event: React.KeyboardEvent<HTMLInputElement>,\n+  ) => {\n+    const trimmedTodo = newTodoTitle.trim();\n+\n+    if (event.key === 'Enter') {\n+      event.preventDefault();\n+\n+      if (trimmedTodo) {\n+        setFocus(false);\n+\n+        try {\n+          setAddNewTodo(true);\n+\n+          const newTodo: Todo = {\n+            id: 0,\n+            userId: USER_ID,\n+            title: trimmedTodo,\n+            completed: false,\n+          };\n+\n+          setTempTodo(newTodo);\n+\n+          const response = await postTodo(newTodo);\n+\n+          setLoadingAddTodoId(response.id);\n+\n+          setTodos(prevTodos => [...prevTodos, response]);\n+          setNewTodoTitle('');\n+          setTempTodo(null);\n+          setAddNewTodo(false);\n+\n+          setLoadingAddTodoId(null);\n+          setFocus(true);\n+        } catch (err) {\n+          setError(true);\n+          setErrorType('add');\n+          setAddNewTodo(false);\n+          setFocus(true);\n+        }\n+      } else {\n+        setError(true);\n+        setErrorType('empty');\n+        setFocus(true);\n+      }\n+    }\n+  };\n+\n+  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n+    setNewTodoTitle(event.target.value);\n+  };\n+\n+  const onClearCompleted = async () => {\n+    const completedTodos = todos.filter(todo => todo.completed);\n+    let errorAll = false;\n+\n+    for (const todo of completedTodos) {\n+      try {\n+        await deleteTodo(todo.id);\n+        setTodos(prevTodos => prevTodos.filter(t => t.id !== todo.id));\n+      } catch (err) {\n+        setError(true);\n+        setErrorType('delete');\n+        errorAll = true;\n+      }\n+    }\n+\n+    if (errorAll) {\n+      setError(true);\n+      setErrorType('delete');\n+    }\n+\n+    if (inputRef.current) {\n+      inputRef.current.focus();\n+    }\n+  };\n+\n+  const handleFilterChange = (newFilter: Status) => {\n+    setFilter(newFilter);\n+  };\n+\n+  const handleDeleteTodo = async (id: number) => {\n+    setDeleteFewTodo(prev => [...prev, id]);\n+    setLoadingTodoId(id);\n+    try {\n+      await deleteTodo(id);\n+      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id));\n+      if (inputRef.current) {\n+        inputRef.current.focus();\n+      }\n+    } catch (err) {\n+      setError(true);\n+      setErrorType('delete');\n+    } finally {\n+      setDeleteFewTodo(prev => prev.filter(todoId => todoId !== id));\n+      setLoadingTodoId(null);\n+    }\n+  };\n+\n+  const handleToggleTodo = async (id: number) => {\n+    // setLoadingTodoId(id);\n+    // try {\n+    setTodos(prev =>\n+      prev.map(todo =>\n+        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n+      ),\n+    );\n+    try {\n+      // deleteTodo(id);\n+      await updateTodo(id);\n+    } catch (err) {\n+      setTodos(prev =>\n+        prev.map(todo =>\n+          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n+        ),\n+      );\n+      setError(true);\n+      setErrorType('toggle');\n+    }\n+  };\n+\n+  const handleToggleAllTodos = () => {\n+    const allCompleted = todos.every(todo => todo.completed);\n+\n+    setTodos(prev =>\n+      prev.map(todo => ({\n+        ...todo,\n+        completed: !allCompleted,\n+      })),\n+    );\n+  };\n+\n+  const hideError = () => {\n+    setError(false);\n+  };\n+\n+  return (\n+    <div className=\"todoapp\">\n+      {!USER_ID && <UserWarning />}\n+      <h1 className=\"todoapp__title\">todos</h1>\n+      {USER_ID && (\n+        <div className=\"todoapp__content\">\n+          <header className=\"todoapp__header\">\n+            {/* this button should have `active` class only if all todos are completed */}\n+            <button\n+              type=\"button\"\n+              className={`todoapp__toggle-all ${todos.every(todo => todo.completed) ? 'active' : ''}`}\n+              data-cy=\"ToggleAllButton\"\n+              onClick={handleToggleAllTodos}\n+            />\n+\n+            {/* Add a todo on form submit */}\n+            <form>\n+              <input\n+                ref={inputRef}\n+                data-cy=\"NewTodoField\"\n+                type=\"text\"\n+                className=\"todoapp__new-todo\"\n+                placeholder=\"What needs to be done?\"\n+                onKeyDown={handleKeyDown}\n+                value={newTodoTitle}\n+                onChange={handleChange}\n+                autoFocus\n+                disabled={!focus}\n+              />\n+            </form>\n+          </header>\n+          <TodoList\n+            todos={todos}\n+            onToggleTodo={handleToggleTodo}\n+            filter={filter}\n+            loading={loading}\n+            setError={setError}\n+            setErrorType={setErrorType}\n+            handleDeleteTodo={handleDeleteTodo}\n+            loadingTodoId={loadingTodoId}\n+            loadingAddTodoId={loadingAddTodoId}\n+            addNewTodo={addNewTodo}\n+            setFocus={setFocus}\n+            setLoadingTodoId={setLoadingTodoId}\n+            tempTodo={tempTodo}\n+            setLoading={setLoading}\n+            deleteFewTodo={deleteFewTodo}\n+          />\n+          {/* Hide the footer if there are no todos */}\n+          {todos.length > 0 && (\n+            <Footer\n+              filter={filter}\n+              todosCount={todos.length}\n+              completedTodosCount={todos.filter(todo => todo.completed).length}\n+              onClearCompleted={onClearCompleted}\n+              handleFilterChange={handleFilterChange}\n+            />\n+          )}\n+        </div>\n+      )}\n+      {/* DON'T use conditional rendering to hide the notification */}\n+      {/* Add the 'hidden' class to hide the message smoothly */}\n+      <ErrorNotification\n+        error={error}\n+        errorType={errorType}\n+        hideError={hideError}\n+      />\n+    </div>\n+  );\n+};\n"
                },
                {
                    "date": 1715353111978,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,10 @@\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n       );\n       setError(true);\n-      setErrorType('toggle');\n+      setErrorType('    case 'update':\n+      ');\n     }\n   };\n \n   const handleToggleAllTodos = () => {\n@@ -265,272 +266,4 @@\n       />\n     </div>\n   );\n };\n-/* eslint-disable jsx-a11y/label-has-associated-control */\n-/* eslint-disable jsx-a11y/control-has-associated-label */\n-import React, { useEffect, useRef, useState } from 'react';\n-import { UserWarning } from './UserWarning';\n-import {\n-  USER_ID,\n-  deleteTodo,\n-  getTodos,\n-  postTodo,\n-  updateTodo,\n-} from './api/todos';\n-import { TodoList } from './Components/TodoList';\n-import { ErrorNotification } from './Components/ErrorNotification';\n-import { Footer } from './Components/Footer';\n-import { Status, Todo, Error } from './Types/Todo';\n-\n-export const App: React.FC = () => {\n-  const [todos, setTodos] = useState<Todo[]>([]);\n-  const [error, setError] = useState<boolean>(false);\n-  const [errorType, setErrorType] = useState<Error | null>(null);\n-  const [filter, setFilter] = useState<Status>('all');\n-  const [newTodoTitle, setNewTodoTitle] = useState('');\n-  const [focus, setFocus] = useState<boolean>(true);\n-  const [tempTodo, setTempTodo] = useState<Todo | null>(null);\n-  const [loading, setLoading] = useState<boolean>(false);\n-  const [loadingTodoId, setLoadingTodoId] = useState<number | null>(null);\n-  const [addNewTodo, setAddNewTodo] = useState<boolean>(false);\n-  const [loadingAddTodoId, setLoadingAddTodoId] = useState<number | null>(null);\n-  const inputRef = useRef<HTMLInputElement>(null);\n-  const [deleteFewTodo, setDeleteFewTodo] = useState<number[]>([]);\n-\n-  useEffect(() => {\n-    const fetchTodos = async () => {\n-      try {\n-        const todosData = await getTodos();\n-\n-        setTodos(todosData);\n-      } catch (err) {\n-        setError(true);\n-        setErrorType('load');\n-      }\n-    };\n-\n-    fetchTodos();\n-  }, []);\n-\n-  useEffect(() => {\n-    if (focus) {\n-      const inputField = document.querySelector(\n-        '.todoapp__new-todo',\n-      ) as HTMLElement;\n-\n-      if (inputField) {\n-        inputField.focus();\n-      }\n-    }\n-  }, [focus]);\n-\n-  if (!USER_ID) {\n-    return <UserWarning />;\n-  }\n-\n-  const handleKeyDown = async (\n-    event: React.KeyboardEvent<HTMLInputElement>,\n-  ) => {\n-    const trimmedTodo = newTodoTitle.trim();\n-\n-    if (event.key === 'Enter') {\n-      event.preventDefault();\n-\n-      if (trimmedTodo) {\n-        setFocus(false);\n-\n-        try {\n-          setAddNewTodo(true);\n-\n-          const newTodo: Todo = {\n-            id: 0,\n-            userId: USER_ID,\n-            title: trimmedTodo,\n-            completed: false,\n-          };\n-\n-          setTempTodo(newTodo);\n-\n-          const response = await postTodo(newTodo);\n-\n-          setLoadingAddTodoId(response.id);\n-\n-          setTodos(prevTodos => [...prevTodos, response]);\n-          setNewTodoTitle('');\n-          setTempTodo(null);\n-          setAddNewTodo(false);\n-\n-          setLoadingAddTodoId(null);\n-          setFocus(true);\n-        } catch (err) {\n-          setError(true);\n-          setErrorType('add');\n-          setAddNewTodo(false);\n-          setFocus(true);\n-        }\n-      } else {\n-        setError(true);\n-        setErrorType('empty');\n-        setFocus(true);\n-      }\n-    }\n-  };\n-\n-  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n-    setNewTodoTitle(event.target.value);\n-  };\n-\n-  const onClearCompleted = async () => {\n-    const completedTodos = todos.filter(todo => todo.completed);\n-    let errorAll = false;\n-\n-    for (const todo of completedTodos) {\n-      try {\n-        await deleteTodo(todo.id);\n-        setTodos(prevTodos => prevTodos.filter(t => t.id !== todo.id));\n-      } catch (err) {\n-        setError(true);\n-        setErrorType('delete');\n-        errorAll = true;\n-      }\n-    }\n-\n-    if (errorAll) {\n-      setError(true);\n-      setErrorType('delete');\n-    }\n-\n-    if (inputRef.current) {\n-      inputRef.current.focus();\n-    }\n-  };\n-\n-  const handleFilterChange = (newFilter: Status) => {\n-    setFilter(newFilter);\n-  };\n-\n-  const handleDeleteTodo = async (id: number) => {\n-    setDeleteFewTodo(prev => [...prev, id]);\n-    setLoadingTodoId(id);\n-    try {\n-      await deleteTodo(id);\n-      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id));\n-      if (inputRef.current) {\n-        inputRef.current.focus();\n-      }\n-    } catch (err) {\n-      setError(true);\n-      setErrorType('delete');\n-    } finally {\n-      setDeleteFewTodo(prev => prev.filter(todoId => todoId !== id));\n-      setLoadingTodoId(null);\n-    }\n-  };\n-\n-  const handleToggleTodo = async (id: number) => {\n-    // setLoadingTodoId(id);\n-    // try {\n-    setTodos(prev =>\n-      prev.map(todo =>\n-        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n-      ),\n-    );\n-    try {\n-      // deleteTodo(id);\n-      await updateTodo(id);\n-    } catch (err) {\n-      setTodos(prev =>\n-        prev.map(todo =>\n-          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n-        ),\n-      );\n-      setError(true);\n-      setErrorType('delete');\n-    }\n-  };\n-\n-  const handleToggleAllTodos = () => {\n-    const allCompleted = todos.every(todo => todo.completed);\n-\n-    setTodos(prev =>\n-      prev.map(todo => ({\n-        ...todo,\n-        completed: !allCompleted,\n-      })),\n-    );\n-  };\n-\n-  const hideError = () => {\n-    setError(false);\n-  };\n-\n-  return (\n-    <div className=\"todoapp\">\n-      {!USER_ID && <UserWarning />}\n-      <h1 className=\"todoapp__title\">todos</h1>\n-      {USER_ID && (\n-        <div className=\"todoapp__content\">\n-          <header className=\"todoapp__header\">\n-            {/* this button should have `active` class only if all todos are completed */}\n-            <button\n-              type=\"button\"\n-              className={`todoapp__toggle-all ${todos.every(todo => todo.completed) ? 'active' : ''}`}\n-              data-cy=\"ToggleAllButton\"\n-              onClick={handleToggleAllTodos}\n-            />\n-\n-            {/* Add a todo on form submit */}\n-            <form>\n-              <input\n-                ref={inputRef}\n-                data-cy=\"NewTodoField\"\n-                type=\"text\"\n-                className=\"todoapp__new-todo\"\n-                placeholder=\"What needs to be done?\"\n-                onKeyDown={handleKeyDown}\n-                value={newTodoTitle}\n-                onChange={handleChange}\n-                autoFocus\n-                disabled={!focus}\n-              />\n-            </form>\n-          </header>\n-          <TodoList\n-            todos={todos}\n-            onToggleTodo={handleToggleTodo}\n-            filter={filter}\n-            loading={loading}\n-            setError={setError}\n-            setErrorType={setErrorType}\n-            handleDeleteTodo={handleDeleteTodo}\n-            loadingTodoId={loadingTodoId}\n-            loadingAddTodoId={loadingAddTodoId}\n-            addNewTodo={addNewTodo}\n-            setFocus={setFocus}\n-            setLoadingTodoId={setLoadingTodoId}\n-            tempTodo={tempTodo}\n-            setLoading={setLoading}\n-            deleteFewTodo={deleteFewTodo}\n-          />\n-          {/* Hide the footer if there are no todos */}\n-          {todos.length > 0 && (\n-            <Footer\n-              filter={filter}\n-              todosCount={todos.length}\n-              completedTodosCount={todos.filter(todo => todo.completed).length}\n-              onClearCompleted={onClearCompleted}\n-              handleFilterChange={handleFilterChange}\n-            />\n-          )}\n-        </div>\n-      )}\n-      {/* DON'T use conditional rendering to hide the notification */}\n-      {/* Add the 'hidden' class to hide the message smoothly */}\n-      <ErrorNotification\n-        error={error}\n-        errorType={errorType}\n-        hideError={hideError}\n-      />\n-    </div>\n-  );\n-};\n"
                },
                {
                    "date": 1715353122511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,10 +176,9 @@\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n       );\n       setError(true);\n-      setErrorType('    case 'update':\n-      ');\n+      setErrorType('update');\n     }\n   };\n \n   const handleToggleAllTodos = () => {\n"
                },
                {
                    "date": 1715353133662,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,9 @@\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n       );\n       setError(true);\n-      setErrorType('update');\n+      setErrorType('toggle');\n     }\n   };\n \n   const handleToggleAllTodos = () => {\n"
                },
                {
                    "date": 1715353140169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,18 +167,17 @@\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n     );\n     try {\n-      // deleteTodo(id);\n       await updateTodo(id);\n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n         ),\n       );\n       setError(true);\n-      setErrorType('toggle');\n+      setErrorType('update');\n     }\n   };\n \n   const handleToggleAllTodos = () => {\n"
                },
                {
                    "date": 1715353195877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,17 +159,15 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n-    // setLoadingTodoId(id);\n-    // try {\n     setTodos(prev =>\n       prev.map(todo =>\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n     );\n     try {\n-      await updateTodo(id);\n+      await updateTodo(id, );\n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n"
                },
                {
                    "date": 1715353201576,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,9 +165,9 @@\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n     );\n     try {\n-      await updateTodo(id, );\n+      await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n"
                },
                {
                    "date": 1715353854803,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,267 @@\n+/* eslint-disable jsx-a11y/label-has-associated-control */\n+/* eslint-disable jsx-a11y/control-has-associated-label */\n+import React, { useEffect, useRef, useState } from 'react';\n+import { UserWarning } from './UserWarning';\n+import {\n+  USER_ID,\n+  deleteTodo,\n+  getTodos,\n+  postTodo,\n+  updateTodo,\n+} from './api/todos';\n+import { TodoList } from './Components/TodoList';\n+import { ErrorNotification } from './Components/ErrorNotification';\n+import { Footer } from './Components/Footer';\n+import { Status, Todo, Error } from './Types/Todo';\n+\n+export const App: React.FC = () => {\n+  const [todos, setTodos] = useState<Todo[]>([]);\n+  const [error, setError] = useState<boolean>(false);\n+  const [errorType, setErrorType] = useState<Error | null>(null);\n+  const [filter, setFilter] = useState<Status>('all');\n+  const [newTodoTitle, setNewTodoTitle] = useState('');\n+  const [focus, setFocus] = useState<boolean>(true);\n+  const [tempTodo, setTempTodo] = useState<Todo | null>(null);\n+  const [loading, setLoading] = useState<boolean>(false);\n+  const [loadingTodoId, setLoadingTodoId] = useState<number | null>(null);\n+  const [addNewTodo, setAddNewTodo] = useState<boolean>(false);\n+  const [loadingAddTodoId, setLoadingAddTodoId] = useState<number | null>(null);\n+  const inputRef = useRef<HTMLInputElement>(null);\n+  const [deleteFewTodo, setDeleteFewTodo] = useState<number[]>([]);\n+\n+  useEffect(() => {\n+    const fetchTodos = async () => {\n+      try {\n+        const todosData = await getTodos();\n+\n+        setTodos(todosData);\n+      } catch (err) {\n+        setError(true);\n+        setErrorType('load');\n+      }\n+    };\n+\n+    fetchTodos();\n+  }, []);\n+\n+  useEffect(() => {\n+    if (focus) {\n+      const inputField = document.querySelector(\n+        '.todoapp__new-todo',\n+      ) as HTMLElement;\n+\n+      if (inputField) {\n+        inputField.focus();\n+      }\n+    }\n+  }, [focus]);\n+\n+  if (!USER_ID) {\n+    return <UserWarning />;\n+  }\n+\n+  const handleKeyDown = async (\n+    event: React.KeyboardEvent<HTMLInputElement>,\n+  ) => {\n+    const trimmedTodo = newTodoTitle.trim();\n+\n+    if (event.key === 'Enter') {\n+      event.preventDefault();\n+\n+      if (trimmedTodo) {\n+        setFocus(false);\n+\n+        try {\n+          setAddNewTodo(true);\n+\n+          const newTodo: Todo = {\n+            id: 0,\n+            userId: USER_ID,\n+            title: trimmedTodo,\n+            completed: false,\n+          };\n+\n+          setTempTodo(newTodo);\n+\n+          const response = await postTodo(newTodo);\n+\n+          setLoadingAddTodoId(response.id);\n+\n+          setTodos(prevTodos => [...prevTodos, response]);\n+          setNewTodoTitle('');\n+          setTempTodo(null);\n+          setAddNewTodo(false);\n+\n+          setLoadingAddTodoId(null);\n+          setFocus(true);\n+        } catch (err) {\n+          setError(true);\n+          setErrorType('add');\n+          setAddNewTodo(false);\n+          setFocus(true);\n+        }\n+      } else {\n+        setError(true);\n+        setErrorType('empty');\n+        setFocus(true);\n+      }\n+    }\n+  };\n+\n+  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n+    setNewTodoTitle(event.target.value);\n+  };\n+\n+  const onClearCompleted = async () => {\n+    const completedTodos = todos.filter(todo => todo.completed);\n+    let errorAll = false;\n+\n+    for (const todo of completedTodos) {\n+      try {\n+        await deleteTodo(todo.id);\n+        setTodos(prevTodos => prevTodos.filter(t => t.id !== todo.id));\n+      } catch (err) {\n+        setError(true);\n+        setErrorType('delete');\n+        errorAll = true;\n+      }\n+    }\n+\n+    if (errorAll) {\n+      setError(true);\n+      setErrorType('delete');\n+    }\n+\n+    if (inputRef.current) {\n+      inputRef.current.focus();\n+    }\n+  };\n+\n+  const handleFilterChange = (newFilter: Status) => {\n+    setFilter(newFilter);\n+  };\n+\n+  const handleDeleteTodo = async (id: number) => {\n+    setDeleteFewTodo(prev => [...prev, id]);\n+    setLoadingTodoId(id);\n+    try {\n+      await deleteTodo(id);\n+      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id));\n+      if (inputRef.current) {\n+        inputRef.current.focus();\n+      }\n+    } catch (err) {\n+      setError(true);\n+      setErrorType('delete');\n+    } finally {\n+      setDeleteFewTodo(prev => prev.filter(todoId => todoId !== id));\n+      setLoadingTodoId(null);\n+    }\n+  };\n+\n+  const handleToggleTodo = async (id: number) => {\n+\n+    \n+    setTodos(prev =>\n+      prev.map(todo =>\n+        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n+      ),\n+    );\n+    try {\n+      await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n+    } catch (err) {\n+      setTodos(prev =>\n+        prev.map(todo =>\n+          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n+        ),\n+      );\n+      setError(true);\n+      setErrorType('update');\n+    }\n+  };\n+\n+  const handleToggleAllTodos = () => {\n+    const allCompleted = todos.every(todo => todo.completed);\n+\n+    setTodos(prev =>\n+      prev.map(todo => ({\n+        ...todo,\n+        completed: !allCompleted,\n+      })),\n+    );\n+  };\n+\n+  const hideError = () => {\n+    setError(false);\n+  };\n+\n+  return (\n+    <div className=\"todoapp\">\n+      {!USER_ID && <UserWarning />}\n+      <h1 className=\"todoapp__title\">todos</h1>\n+      {USER_ID && (\n+        <div className=\"todoapp__content\">\n+          <header className=\"todoapp__header\">\n+            {/* this button should have `active` class only if all todos are completed */}\n+            <button\n+              type=\"button\"\n+              className={`todoapp__toggle-all ${todos.every(todo => todo.completed) ? 'active' : ''}`}\n+              data-cy=\"ToggleAllButton\"\n+              onClick={handleToggleAllTodos}\n+            />\n+\n+            {/* Add a todo on form submit */}\n+            <form>\n+              <input\n+                ref={inputRef}\n+                data-cy=\"NewTodoField\"\n+                type=\"text\"\n+                className=\"todoapp__new-todo\"\n+                placeholder=\"What needs to be done?\"\n+                onKeyDown={handleKeyDown}\n+                value={newTodoTitle}\n+                onChange={handleChange}\n+                autoFocus\n+                disabled={!focus}\n+              />\n+            </form>\n+          </header>\n+          <TodoList\n+            todos={todos}\n+            onToggleTodo={handleToggleTodo}\n+            filter={filter}\n+            loading={loading}\n+            setError={setError}\n+            setErrorType={setErrorType}\n+            handleDeleteTodo={handleDeleteTodo}\n+            loadingTodoId={loadingTodoId}\n+            loadingAddTodoId={loadingAddTodoId}\n+            addNewTodo={addNewTodo}\n+            setFocus={setFocus}\n+            setLoadingTodoId={setLoadingTodoId}\n+            tempTodo={tempTodo}\n+            setLoading={setLoading}\n+            deleteFewTodo={deleteFewTodo}\n+          />\n+          {/* Hide the footer if there are no todos */}\n+          {todos.length > 0 && (\n+            <Footer\n+              filter={filter}\n+              todosCount={todos.length}\n+              completedTodosCount={todos.filter(todo => todo.completed).length}\n+              onClearCompleted={onClearCompleted}\n+              handleFilterChange={handleFilterChange}\n+            />\n+          )}\n+        </div>\n+      )}\n+      {/* DON'T use conditional rendering to hide the notification */}\n+      {/* Add the 'hidden' class to hide the message smoothly */}\n+      <ErrorNotification\n+        error={error}\n+        errorType={errorType}\n+        hideError={hideError}\n+      />\n+    </div>\n+  );\n+};\n"
                },
                {
                    "date": 1715353860051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,10 +159,10 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n+setLoadi\n \n-    \n     setTodos(prev =>\n       prev.map(todo =>\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n@@ -264,269 +264,4 @@\n       />\n     </div>\n   );\n };\n-/* eslint-disable jsx-a11y/label-has-associated-control */\n-/* eslint-disable jsx-a11y/control-has-associated-label */\n-import React, { useEffect, useRef, useState } from 'react';\n-import { UserWarning } from './UserWarning';\n-import {\n-  USER_ID,\n-  deleteTodo,\n-  getTodos,\n-  postTodo,\n-  updateTodo,\n-} from './api/todos';\n-import { TodoList } from './Components/TodoList';\n-import { ErrorNotification } from './Components/ErrorNotification';\n-import { Footer } from './Components/Footer';\n-import { Status, Todo, Error } from './Types/Todo';\n-\n-export const App: React.FC = () => {\n-  const [todos, setTodos] = useState<Todo[]>([]);\n-  const [error, setError] = useState<boolean>(false);\n-  const [errorType, setErrorType] = useState<Error | null>(null);\n-  const [filter, setFilter] = useState<Status>('all');\n-  const [newTodoTitle, setNewTodoTitle] = useState('');\n-  const [focus, setFocus] = useState<boolean>(true);\n-  const [tempTodo, setTempTodo] = useState<Todo | null>(null);\n-  const [loading, setLoading] = useState<boolean>(false);\n-  const [loadingTodoId, setLoadingTodoId] = useState<number | null>(null);\n-  const [addNewTodo, setAddNewTodo] = useState<boolean>(false);\n-  const [loadingAddTodoId, setLoadingAddTodoId] = useState<number | null>(null);\n-  const inputRef = useRef<HTMLInputElement>(null);\n-  const [deleteFewTodo, setDeleteFewTodo] = useState<number[]>([]);\n-\n-  useEffect(() => {\n-    const fetchTodos = async () => {\n-      try {\n-        const todosData = await getTodos();\n-\n-        setTodos(todosData);\n-      } catch (err) {\n-        setError(true);\n-        setErrorType('load');\n-      }\n-    };\n-\n-    fetchTodos();\n-  }, []);\n-\n-  useEffect(() => {\n-    if (focus) {\n-      const inputField = document.querySelector(\n-        '.todoapp__new-todo',\n-      ) as HTMLElement;\n-\n-      if (inputField) {\n-        inputField.focus();\n-      }\n-    }\n-  }, [focus]);\n-\n-  if (!USER_ID) {\n-    return <UserWarning />;\n-  }\n-\n-  const handleKeyDown = async (\n-    event: React.KeyboardEvent<HTMLInputElement>,\n-  ) => {\n-    const trimmedTodo = newTodoTitle.trim();\n-\n-    if (event.key === 'Enter') {\n-      event.preventDefault();\n-\n-      if (trimmedTodo) {\n-        setFocus(false);\n-\n-        try {\n-          setAddNewTodo(true);\n-\n-          const newTodo: Todo = {\n-            id: 0,\n-            userId: USER_ID,\n-            title: trimmedTodo,\n-            completed: false,\n-          };\n-\n-          setTempTodo(newTodo);\n-\n-          const response = await postTodo(newTodo);\n-\n-          setLoadingAddTodoId(response.id);\n-\n-          setTodos(prevTodos => [...prevTodos, response]);\n-          setNewTodoTitle('');\n-          setTempTodo(null);\n-          setAddNewTodo(false);\n-\n-          setLoadingAddTodoId(null);\n-          setFocus(true);\n-        } catch (err) {\n-          setError(true);\n-          setErrorType('add');\n-          setAddNewTodo(false);\n-          setFocus(true);\n-        }\n-      } else {\n-        setError(true);\n-        setErrorType('empty');\n-        setFocus(true);\n-      }\n-    }\n-  };\n-\n-  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n-    setNewTodoTitle(event.target.value);\n-  };\n-\n-  const onClearCompleted = async () => {\n-    const completedTodos = todos.filter(todo => todo.completed);\n-    let errorAll = false;\n-\n-    for (const todo of completedTodos) {\n-      try {\n-        await deleteTodo(todo.id);\n-        setTodos(prevTodos => prevTodos.filter(t => t.id !== todo.id));\n-      } catch (err) {\n-        setError(true);\n-        setErrorType('delete');\n-        errorAll = true;\n-      }\n-    }\n-\n-    if (errorAll) {\n-      setError(true);\n-      setErrorType('delete');\n-    }\n-\n-    if (inputRef.current) {\n-      inputRef.current.focus();\n-    }\n-  };\n-\n-  const handleFilterChange = (newFilter: Status) => {\n-    setFilter(newFilter);\n-  };\n-\n-  const handleDeleteTodo = async (id: number) => {\n-    setDeleteFewTodo(prev => [...prev, id]);\n-    setLoadingTodoId(id);\n-    try {\n-      await deleteTodo(id);\n-      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id));\n-      if (inputRef.current) {\n-        inputRef.current.focus();\n-      }\n-    } catch (err) {\n-      setError(true);\n-      setErrorType('delete');\n-    } finally {\n-      setDeleteFewTodo(prev => prev.filter(todoId => todoId !== id));\n-      setLoadingTodoId(null);\n-    }\n-  };\n-\n-  const handleToggleTodo = async (id: number) => {\n-    setTodos(prev =>\n-      prev.map(todo =>\n-        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n-      ),\n-    );\n-    try {\n-      await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n-    } catch (err) {\n-      setTodos(prev =>\n-        prev.map(todo =>\n-          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n-        ),\n-      );\n-      setError(true);\n-      setErrorType('update');\n-    }\n-  };\n-\n-  const handleToggleAllTodos = () => {\n-    const allCompleted = todos.every(todo => todo.completed);\n-\n-    setTodos(prev =>\n-      prev.map(todo => ({\n-        ...todo,\n-        completed: !allCompleted,\n-      })),\n-    );\n-  };\n-\n-  const hideError = () => {\n-    setError(false);\n-  };\n-\n-  return (\n-    <div className=\"todoapp\">\n-      {!USER_ID && <UserWarning />}\n-      <h1 className=\"todoapp__title\">todos</h1>\n-      {USER_ID && (\n-        <div className=\"todoapp__content\">\n-          <header className=\"todoapp__header\">\n-            {/* this button should have `active` class only if all todos are completed */}\n-            <button\n-              type=\"button\"\n-              className={`todoapp__toggle-all ${todos.every(todo => todo.completed) ? 'active' : ''}`}\n-              data-cy=\"ToggleAllButton\"\n-              onClick={handleToggleAllTodos}\n-            />\n-\n-            {/* Add a todo on form submit */}\n-            <form>\n-              <input\n-                ref={inputRef}\n-                data-cy=\"NewTodoField\"\n-                type=\"text\"\n-                className=\"todoapp__new-todo\"\n-                placeholder=\"What needs to be done?\"\n-                onKeyDown={handleKeyDown}\n-                value={newTodoTitle}\n-                onChange={handleChange}\n-                autoFocus\n-                disabled={!focus}\n-              />\n-            </form>\n-          </header>\n-          <TodoList\n-            todos={todos}\n-            onToggleTodo={handleToggleTodo}\n-            filter={filter}\n-            loading={loading}\n-            setError={setError}\n-            setErrorType={setErrorType}\n-            handleDeleteTodo={handleDeleteTodo}\n-            loadingTodoId={loadingTodoId}\n-            loadingAddTodoId={loadingAddTodoId}\n-            addNewTodo={addNewTodo}\n-            setFocus={setFocus}\n-            setLoadingTodoId={setLoadingTodoId}\n-            tempTodo={tempTodo}\n-            setLoading={setLoading}\n-            deleteFewTodo={deleteFewTodo}\n-          />\n-          {/* Hide the footer if there are no todos */}\n-          {todos.length > 0 && (\n-            <Footer\n-              filter={filter}\n-              todosCount={todos.length}\n-              completedTodosCount={todos.filter(todo => todo.completed).length}\n-              onClearCompleted={onClearCompleted}\n-              handleFilterChange={handleFilterChange}\n-            />\n-          )}\n-        </div>\n-      )}\n-      {/* DON'T use conditional rendering to hide the notification */}\n-      {/* Add the 'hidden' class to hide the message smoothly */}\n-      <ErrorNotification\n-        error={error}\n-        errorType={errorType}\n-        hideError={hideError}\n-      />\n-    </div>\n-  );\n-};\n"
                },
                {
                    "date": 1715353947022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,9 +159,9 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n-setLoadi\n+    setLoadingTodoId(id);\n \n     setTodos(prev =>\n       prev.map(todo =>\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n@@ -176,9 +176,9 @@\n         ),\n       );\n       setError(true);\n       setErrorType('update');\n-    }\n+    } finally\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n"
                },
                {
                    "date": 1715353953157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,11 @@\n         ),\n       );\n       setError(true);\n       setErrorType('update');\n-    } finally\n+    } finally {\n+      setloadi\n+    }\n   };\n \n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n"
                },
                {
                    "date": 1715353958187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -177,9 +177,9 @@\n       );\n       setError(true);\n       setErrorType('update');\n     } finally {\n-      setloadi\n+      setLoadingTodoId(null);\n     }\n   };\n \n   const handleToggleAllTodos = () => {\n"
                },
                {
                    "date": 1715354915393,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,8 +161,9 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n+    try\n     setTodos(prev =>\n       prev.map(todo =>\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n       ),\n"
                },
                {
                    "date": 1715354928299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,15 +161,13 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n-    try\n-    setTodos(prev =>\n-      prev.map(todo =>\n-        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n-      ),\n-    );\n     try {\n+\n+    }\n+    \n+    try {\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n"
                },
                {
                    "date": 1715354944778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,9 +164,9 @@\n \n     try {\n \n     }\n-    \n+\n     try {\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n       setTodos(prev =>\n"
                },
                {
                    "date": 1715354954622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,13 +161,14 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n+    setTodos(prev =>\n+      prev.map(todo =>\n+        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n+      ),\n+    );\n     try {\n-\n-    }\n-\n-    try {\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n"
                },
                {
                    "date": 1715355361826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,28 +161,33 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n-    setTodos(prev =>\n-      prev.map(todo =>\n-        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n-      ),\n-    );\n     try {\n+      // Optimistically update the state of the todo\n+      setTodos(prev =>\n+        prev.map(todo =>\n+          todo.id === id ? { ...todo, completed: !todo.completed } : todo\n+        )\n+      );\n+\n+      // Send update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n+      // If there's an error, revert the changes in the state\n       setTodos(prev =>\n         prev.map(todo =>\n-          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n-        ),\n+          todo.id === id ? { ...todo, completed: !todo.completed } : todo\n+        )\n       );\n       setError(true);\n       setErrorType('update');\n     } finally {\n       setLoadingTodoId(null);\n     }\n   };\n \n+\n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n \n     setTodos(prev =>\n"
                },
                {
                    "date": 1715355367404,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,19 +162,17 @@\n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n     try {\n-      // Optimistically update the state of the todo\n+      //  update the state of the todo\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n       );\n \n-      // Send update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n-      // If there's an error, revert the changes in the state\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n"
                },
                {
                    "date": 1715355636700,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,22 +159,22 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n-    setLoadingTodoId(id);\n+    // Optimistically update the UI\n+    setTodos(prevTodos =>\n+      prevTodos.map(todo =>\n+        todo.id === id ? { ...todo, completed: !todo.completed } : todo\n+      )\n+    );\n \n     try {\n-      //  update the state of the todo\n-      setTodos(prev =>\n-        prev.map(todo =>\n-          todo.id === id ? { ...todo, completed: !todo.completed } : todo\n-        )\n-      );\n-\n+      // Send the update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n-      setTodos(prev =>\n-        prev.map(todo =>\n+      // If an error occurs, revert the UI changes\n+      setTodos(prevTodos =>\n+        prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n       );\n       setError(true);\n"
                },
                {
                    "date": 1715355643338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,20 +159,17 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n-    // Optimistically update the UI\n     setTodos(prevTodos =>\n       prevTodos.map(todo =>\n         todo.id === id ? { ...todo, completed: !todo.completed } : todo\n       )\n     );\n \n     try {\n-      // Send the update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n-      // If an error occurs, revert the UI changes\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n"
                },
                {
                    "date": 1715356053595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -159,17 +159,22 @@\n     }\n   };\n \n   const handleToggleTodo = async (id: number) => {\n-    setTodos(prevTodos =>\n-      prevTodos.map(todo =>\n-        todo.id === id ? { ...todo, completed: !todo.completed } : todo\n-      )\n-    );\n+    setLoadingTodoId(id);\n \n     try {\n+      // Optimistically update the todo's completion status\n+      setTodos(prevTodos =>\n+        prevTodos.map(todo =>\n+          todo.id === id ? { ...todo, completed: !todo.completed } : todo\n+        )\n+      );\n+\n+      // Send the update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n+      // Revert the optimistic update on error\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n"
                },
                {
                    "date": 1715356058710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,19 +162,16 @@\n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n     try {\n-      // Optimistically update the todo's completion status\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n       );\n \n-      // Send the update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n-      // Revert the optimistic update on error\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n"
                },
                {
                    "date": 1715356429878,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,16 +162,19 @@\n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n     try {\n+      // Optimistically update the todo's completion status\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n       );\n \n+      // Send the update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n+      // Revert the optimistic update on error\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n"
                },
                {
                    "date": 1715356435857,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,19 +162,16 @@\n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n     try {\n-      // Optimistically update the todo's completion status\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n       );\n \n-      // Send the update request to the server\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n-      // Revert the optimistic update on error\n       setTodos(prevTodos =>\n         prevTodos.map(todo =>\n           todo.id === id ? { ...todo, completed: !todo.completed } : todo\n         )\n"
                },
                {
                    "date": 1715357219447,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,30 +161,28 @@\n \n   const handleToggleTodo = async (id: number) => {\n     setLoadingTodoId(id);\n \n+    setTodos(prev =>\n+      prev.map(todo =>\n+        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n+      ),\n+    );\n     try {\n-      setTodos(prevTodos =>\n-        prevTodos.map(todo =>\n-          todo.id === id ? { ...todo, completed: !todo.completed } : todo\n-        )\n-      );\n-\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n     } catch (err) {\n-      setTodos(prevTodos =>\n-        prevTodos.map(todo =>\n-          todo.id === id ? { ...todo, completed: !todo.completed } : todo\n-        )\n+      setTodos(prev =>\n+        prev.map(todo =>\n+          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n+        ),\n       );\n       setError(true);\n       setErrorType('update');\n     } finally {\n       setLoadingTodoId(null);\n     }\n   };\n \n-\n   const handleToggleAllTodos = () => {\n     const allCompleted = todos.every(todo => todo.completed);\n \n     setTodos(prev =>\n"
                },
                {
                    "date": 1715357552520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -168,8 +168,9 @@\n       ),\n     );\n     try {\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n+    \n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n           todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n"
                },
                {
                    "date": 1715357570491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,18 +163,24 @@\n     setLoadingTodoId(id);\n \n     setTodos(prev =>\n       prev.map(todo =>\n-        todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n+        todo.id === id ? { ...todo, pendingToggle: true } : todo,\n       ),\n     );\n+\n     try {\n       await updateTodo(id, !todos.find(todo => todo.id === id)?.completed);\n-    \n+\n+      setTodos(prev =>\n+        prev.map(todo =>\n+          todo.id === id ? { ...todo, completed: !todo.completed, pendingToggle: false } : todo,\n+        ),\n+      );\n     } catch (err) {\n       setTodos(prev =>\n         prev.map(todo =>\n-          todo.id == id ? { ...todo, completed: !todo.completed } : todo,\n+          todo.id === id ? { ...todo, pendingToggle: false } : todo,\n         ),\n       );\n       setError(true);\n       setErrorType('update');\n"
                }
            ],
            "date": 1715350240271,
            "name": "Commit-0",
            "content": "/* eslint-disable jsx-a11y/label-has-associated-control */\n/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React, { useEffect, useRef, useState } from 'react';\nimport { UserWarning } from './UserWarning';\nimport { USER_ID, deleteTodo, getTodos, postTodo } from './api/todos';\nimport { TodoList } from './Components/TodoList';\nimport { ErrorNotification } from './Components/ErrorNotification';\nimport { Footer } from './Components/Footer';\nimport { Status, Todo, Error } from './types/Todo';\n\nexport const App: React.FC = () => {\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [error, setError] = useState<boolean>(false);\n  const [errorType, setErrorType] = useState<Error | null>(null);\n  const [filter, setFilter] = useState<Status>('all');\n  const [newTodoTitle, setNewTodoTitle] = useState('');\n  const [focus, setFocus] = useState<boolean>(true);\n  const [tempTodo, setTempTodo] = useState<Todo | null>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [loadingTodoId, setLoadingTodoId] = useState<number | null>(null);\n  const [addNewTodo, setAddNewTodo] = useState<boolean>(false);\n  const [loadingAddTodoId, setLoadingAddTodoId] = useState<number | null>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const [deleteFewTodo, setDeleteFewTodo] = useState<number[]>([]);\n\n  useEffect(() => {\n    const fetchTodos = async () => {\n      try {\n        const todosData = await getTodos();\n\n        setTodos(todosData);\n      } catch (err) {\n        setError(true);\n        setErrorType('load');\n      }\n    };\n\n    fetchTodos();\n  }, []);\n\n  useEffect(() => {\n    if (focus) {\n      const inputField = document.querySelector(\n        '.todoapp__new-todo',\n      ) as HTMLElement;\n\n      if (inputField) {\n        inputField.focus();\n      }\n    }\n  }, [focus]);\n\n  if (!USER_ID) {\n    return <UserWarning />;\n  }\n\n  const handleKeyDown = async (\n    event: React.KeyboardEvent<HTMLInputElement>,\n  ) => {\n    const trimmedTodo = newTodoTitle.trim();\n\n    if (event.key === 'Enter') {\n      event.preventDefault();\n\n      if (trimmedTodo) {\n        setFocus(false);\n\n        try {\n          setAddNewTodo(true);\n\n          const newTodo: Todo = {\n            id: 0,\n            userId: USER_ID,\n            title: trimmedTodo,\n            completed: false,\n          };\n\n          setTempTodo(newTodo);\n\n          const response = await postTodo(newTodo);\n\n          setLoadingAddTodoId(response.id);\n\n          setTodos(prevTodos => [...prevTodos, response]);\n          setNewTodoTitle('');\n          setTempTodo(null);\n          setAddNewTodo(false);\n\n          setLoadingAddTodoId(null);\n          setFocus(true);\n        } catch (err) {\n          setError(true);\n          setErrorType('add');\n          setAddNewTodo(false);\n          setFocus(true);\n        }\n      } else {\n        setError(true);\n        setErrorType('empty');\n        setFocus(true);\n      }\n    }\n  };\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setNewTodoTitle(event.target.value);\n  };\n\n  const onClearCompleted = async () => {\n    const completedTodos = todos.filter(todo => todo.completed);\n    let errorAll = false;\n\n    for (const todo of completedTodos) {\n      try {\n        await deleteTodo(todo.id);\n        setTodos(prevTodos => prevTodos.filter(t => t.id !== todo.id));\n      } catch (err) {\n        setError(true);\n        setErrorType('delete');\n        errorAll = true;\n      }\n    }\n\n    if (errorAll) {\n      setError(true);\n      setErrorType('delete');\n    }\n\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  };\n\n  const handleFilterChange = (newFilter: Status) => {\n    setFilter(newFilter);\n  };\n\n  const handleDeleteTodo = async (id: number) => {\n    setDeleteFewTodo(prev => [...prev, id]);\n    setLoadingTodoId(id);\n    try {\n      await deleteTodo(id);\n      setTodos(prevTodos => prevTodos.filter(todo => todo.id !== id));\n      if (inputRef.current) {\n        inputRef.current.focus();\n      }\n    } catch (err) {\n      setError(true);\n      setErrorType('delete');\n    } finally {\n      setDeleteFewTodo(prev => prev.filter(todoId => todoId !== id));\n      setLoadingTodoId(null);\n    }\n  };\n\n  const handleToggleTodo = async (id: number) => {\n    setLoadingTodoId(id);\n    try {\n      setTodos(prev =>\n        prev.map(todo =>\n          todo.id === id ? { ...todo, completed: !todo.completed } : todo,\n        ),\n      );\n      await deleteTodo(id);\n      setLoadingTodoId(null);\n    } catch (err) {\n      setError(true);\n      setErrorType('delete');\n    }\n  };\n\n  const handleToggleAllTodos = () => {\n    const allCompleted = todos.every(todo => todo.completed);\n\n    setTodos(prev =>\n      prev.map(todo => ({\n        ...todo,\n        completed: !allCompleted,\n      })),\n    );\n  };\n\n  const hideError = () => {\n    setError(false);\n  };\n\n  return (\n    <div className=\"todoapp\">\n      {!USER_ID && <UserWarning />}\n      <h1 className=\"todoapp__title\">todos</h1>\n      {USER_ID && (\n        <div className=\"todoapp__content\">\n          <header className=\"todoapp__header\">\n            {/* this button should have `active` class only if all todos are completed */}\n            <button\n              type=\"button\"\n              className={`todoapp__toggle-all ${todos.every(todo => todo.completed) ? 'active' : ''}`}\n              data-cy=\"ToggleAllButton\"\n              onClick={handleToggleAllTodos}\n            />\n\n            {/* Add a todo on form submit */}\n            <form>\n              <input\n                ref={inputRef}\n                data-cy=\"NewTodoField\"\n                type=\"text\"\n                className=\"todoapp__new-todo\"\n                placeholder=\"What needs to be done?\"\n                onKeyDown={handleKeyDown}\n                value={newTodoTitle}\n                onChange={handleChange}\n                autoFocus\n                disabled={!focus}\n              />\n            </form>\n          </header>\n          <TodoList\n            todos={todos}\n            onToggleTodo={handleToggleTodo}\n            filter={filter}\n            loading={loading}\n            setError={setError}\n            setErrorType={setErrorType}\n            handleDeleteTodo={handleDeleteTodo}\n            loadingTodoId={loadingTodoId}\n            loadingAddTodoId={loadingAddTodoId}\n            addNewTodo={addNewTodo}\n            setFocus={setFocus}\n            setLoadingTodoId={setLoadingTodoId}\n            tempTodo={tempTodo}\n            setLoading={setLoading}\n            deleteFewTodo={deleteFewTodo}\n          />\n          {/* Hide the footer if there are no todos */}\n          {todos.length > 0 && (\n            <Footer\n              filter={filter}\n              todosCount={todos.length}\n              completedTodosCount={todos.filter(todo => todo.completed).length}\n              onClearCompleted={onClearCompleted}\n              handleFilterChange={handleFilterChange}\n            />\n          )}\n        </div>\n      )}\n      {/* DON'T use conditional rendering to hide the notification */}\n      {/* Add the 'hidden' class to hide the message smoothly */}\n      <ErrorNotification\n        error={error}\n        errorType={errorType}\n        hideError={hideError}\n      />\n    </div>\n  );\n};\n\n"
        }
    ]
}